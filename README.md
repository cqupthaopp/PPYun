# 							PPYunPan



### 已完成的功能

- [x] 文件分块上传
- [x] 文件分块下载
- [x] 文件下载限速
- [x] 文件秒传(如果数据库中存在相同的文件即完成秒传)
- [x] 文件权限管理
- [x] 文件重命名，路径修改
- [x] 文件分享
- [x] 文件二维码分享
- [x] 注册，登录

--------------------------------------------------------

# 接口：

#### 请求路径 （登录）

```markdown
POST 	/user/login
```

#### 请求参数

| 字段名   | 必选 | 类型   | 说明   |
| -------- | ---- | ------ | ------ |
| username | 是   | string | 用户名 |
| password | 是   | string | 密码   |

-----------------------------------------------------------------------------------------------------------------------------------------------------------

#### 请求路径 (注册)

```markdown
POST 	/user/reg
```

#### 请求参数

| 字段名   | 必选 | 类型   | 说明   |
| -------- | ---- | ------ | ------ |
| username | 是   | string | 用户名 |
| password | 是   | string | 密码   |

#### 返回参数

| 字段名 | 必选 | 类型   | 说明        |
| ------ | ---- | ------ | ----------- |
| token  | 是   | string | 签发的token |

-----------------------------------------------------------------------------------------------------------------------------------------------------------

#### 请求路径 (创建文件夹)

```markdown
POST 	/file/create/folder
```

#### 请求头

| 字段名        | 必选 | 类型  | 说明      |
| ------------- | ---- | ----- | --------- |
| Authorization | 是   | token | 验证token |

#### 请求参数

| 字段名 | 必选 | 类型   | 说明           |
| ------ | ---- | ------ | -------------- |
| path   | 是   | string | 上传的文件路径 |

-----------------------------------------------------------------------------------------------------------------------------------------------------------

#### 请求路径 (上传文件)

```markdown
POST 	/file/upload
```

#### 请求头

| 字段名        | 必选 | 类型  | 说明      |
| ------------- | ---- | ----- | --------- |
| Authorization | 是   | token | 验证token |

#### 请求参数

| 字段名 | 必选 | 类型   | 说明               |
| ------ | ---- | ------ | ------------------ |
| md5    | 是   | string | 文件的md5值        |
| path   | 是   | string | 上传的文件相对路径 |
| chunks | 是   | int    | 总分片数           |
| chunk  | 是   | int    | 当前分片数         |
| name   | 是   | string | 文件名             |
| file   | 是   | file   | 分块文件           |

-----------------------------------------------------------------------------------------------------------------------------------------------------------

#### 请求路径 (重命名文件)

```markdown
POST 	/files/rename
```

#### 请求头

| 字段名        | 必选 | 类型  | 说明      |
| ------------- | ---- | ----- | --------- |
| Authorization | 是   | token | 验证token |

#### 请求参数

| 字段名   | 必选 | 类型   | 说明           |
| -------- | ---- | ------ | -------------- |
| path     | 是   | string | 上传的文件路径 |
| filename | 是   | string | 原文件名       |
| newname  | 是   | string | 新文件名       |

-----------------------------------------------------------------------------------------------------------------------------------------------------------

#### 请求路径 (下载文件)

```markdown
GET 	/files/download/:path
```

#### 请求头

| 字段名        | 必选 | 类型  | 说明      |
| ------------- | ---- | ----- | --------- |
| Authorization | 是   | token | 验证token |

#### 请求参数

query参数

| 字段名 | 必选 | 类型   | 说明           |
| ------ | ---- | ------ | -------------- |
| path   | 是   | string | 文件的相对路径 |

-----------------------------------------------------------------------------------------------------------------------------------------------------------

#### 请求路径 (修改路径)

```markdown
POST 	/files/modify/path
```

#### 请求头

| 字段名        | 必选 | 类型  | 说明      |
| ------------- | ---- | ----- | --------- |
| Authorization | 是   | token | 验证token |

#### 请求参数

| 字段名  | 必选 | 类型   | 说明           |
| ------- | ---- | ------ | -------------- |
| path    | 是   | string | 上传的文件路径 |
| newpath | 是   | string | 新的路径       |

-----------------------------------------------------------------------------------------------------------------------------------------------------------

#### 请求路径 (修改权限)

```markdown
POST 	/files/modify/permission
```

#### 请求头

| 字段名        | 必选 | 类型  | 说明      |
| ------------- | ---- | ----- | --------- |
| Authorization | 是   | token | 验证token |

#### 请求参数

| 字段名              | 必选 | 类型   | 说明                                 |
| ------------------- | ---- | ------ | ------------------------------------ |
| path                | 是   | string | 需要修改的文件相对路径               |
| allCanDownload      | 是   | int    | 是否所有人可下载(0-false,1-true)     |
| downloadOnLink      | 是   | int    | 是否可以通过链接下载(0-false,1-true) |
| onlyDownloadByOwner | 是   | int    | 是否仅自己可见(0-false,1-true)       |

-----------------------------------------------------------------------------------------------------------------------------------------------------------

#### 请求路径 (修改删除文件)

```markdown
POST 	/files/remove
```

#### 请求头

| 字段名        | 必选 | 类型  | 说明      |
| ------------- | ---- | ----- | --------- |
| Authorization | 是   | token | 验证token |

#### 请求参数

| 字段名 | 必选 | 类型   | 说明                   |
| ------ | ---- | ------ | ---------------------- |
| path   | 是   | string | 需要删除的文件相对路径 |

-----------------------------------------------------------------------------------------------------------------------------------------------------------

#### 请求路径 (获取分享链接)

```markdown
POST 	/share/link
```

#### 请求头

| 字段名        | 必选 | 类型  | 说明      |
| ------------- | ---- | ----- | --------- |
| Authorization | 是   | token | 验证token |

#### 请求参数

| 字段名 | 必选 | 类型   | 说明                   |
| ------ | ---- | ------ | ---------------------- |
| path   | 是   | string | 需要分享的文件相对路径 |

-----------------------------------------------------------

#### 请求路径 (通过分享二维码)

```markdown
GET			/share/qrcode
```

#### query参数

| 字段名 | 必选 | 类型   | 说明            |
| ------ | ---- | ------ | --------------- |
| url    | 是   | string | 分享的链接的URL |

-----------------------------------------------------------------------------------------------------------------------------------------------------------

#### 请求路径 (通过链接下载)

```markdown
GET			/share/download
```

#### 请求头

| 字段名        | 必选 | 类型  | 说明      |
| ------------- | ---- | ----- | --------- |
| Authorization | 是   | token | 验证token |

#### query参数

| 字段名   | 必选 | 类型   | 说明                                   |
| -------- | ---- | ------ | -------------------------------------- |
| path     | 是   | string | 下载的文件路径(生成link时候已经写入)   |
| username | 是   | string | 原文件的发布者(生成link的时候已经写入) |

-----------------------------------------------------------------------------------------------------------------------------------------------------------

#### 